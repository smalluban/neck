{"version":3,"sources":["src/neck.coffee","src/modules/controller.coffee","src/modules/helper.coffee","src/modules/router.coffee","src/modules/app.coffee","src/helpers/attr.coffee","src/helpers/bind.coffee","src/helpers/class.coffee","src/helpers/collection.coffee","src/helpers/controller.coffee","src/helpers/element.coffee","src/helpers/events.coffee","src/helpers/hide.coffee","src/helpers/href.coffee","src/helpers/init.coffee","src/helpers/list.coffee","src/helpers/neck.coffee","src/helpers/route.coffee","src/helpers/show.coffee","src/helpers/template.coffee","src/helpers/value.coffee","src/helpers/yield.coffee"],"names":[],"mappings":"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","file":"dist/neck.js","sourcesContent":["Neck = window.Neck or= {}\n\n# Add \"ui-hide\" class\n$('''\n  <style media=\"screen\">\n    .ui-hide { display: none !important }\n  </style>\n  ''').appendTo $('head')\n\nNeck.Tools =\n  dashToCamel: (str)-> str.replace /\\W+(.)/g, (x, chr)-> chr.toUpperCase()\n  camelToDash: (str)-> str.replace(/\\W+/g, '-').replace(/([a-z\\d])([A-Z])/g, '$1-$2').toLowerCase()\n\n# Dependency injectors container\nNeck.DI = {}\n\n# DI searching on global scope given variables\nNeck.DI.globals =\n  load: (route, options)-> \n    try\n      if destiny = eval(route)\n        return destiny\n      else\n        if options.type isnt 'template'\n          return throw \"Required '#{route}' object in global scope\"\n    catch\n      if options.type isnt 'template'\n        return throw \"Required '#{route}' object in global scope\"\n\n    route\n\n# DI working with commonjs require module wrapper\nNeck.DI.commonjs =\n  controllerPrefix: 'controllers'\n  helperPrefix: 'helpers'\n  templatePrefix: 'templates'\n  _routePath: /^([a-zA-Z$_][a-zA-Z0-9$_\\.]+\\/?)+$/i\n\n  load: (route, options)-> \n    if options.type is 'template'\n      unless route.match @_routePath then return route\n\n    try\n      return require (if options.type then @[options.type + 'Prefix'] + \"/\" else '') + route\n    catch\n      return throw \"Required '#{route}' object path for CommonJS dependency injection\"","class Neck.Controller extends Backbone.View \n  # Check reverse parsing \n  @REVERSE_PARSING: $('<div ui-test1 ui-test2></div>')[0].attributes[0].name is 'ui-test2'\n\n  REGEXPS:\n    PROPERTY_SEPARATOR: /\\.|\\[.+\\]\\.?/\n\n  divWrapper: true\n  parseSelf: true\n  template: undefined\n\n  injector: Neck.DI.globals\n\n  constructor: (opts = {})->\n    super\n\n    # Create scope inherit or new\n    scope = if @parent = opts.parent then Object.create(@parent.scope) else _context: @\n    @scope = _.extend scope, @scope, _resolves: {}\n\n    # Listen to parent events\n    if @parent\n      @listenTo @parent, 'render:before', @remove \n      @listenTo @parent, 'remove:before', @remove\n\n      # Inherit injector\n      @injector = @parent.injector\n      \n    switch @template\n      when undefined\n        @template = opts.template if opts.template\n      when true\n        @template = @el.innerHTML.trim()\n        @el.innerHTML = ''\n\n    @params = opts.params or {}\n\n  remove: =>\n    @trigger 'remove:before'\n\n    # Clear references\n    @parent = undefined\n    @scope = undefined\n\n    # Trigger Backbone remove \n    super\n\n    @trigger 'remove:after'\n    undefined\n\n  render: ->\n    @trigger 'render:before' \n\n    @_onRender = true\n\n    if @template\n      unless typeof @template is 'function'\n        if typeof (template = @injector.load(@template, type: 'template')) is 'function'\n          template = template @scope\n      else\n        template = @template @scope\n\n      @_parseNode @el, true if @parseSelf\n  \n      template = $(template)\n      @_parseNode el for el in template\n          \n      if @divWrapper\n        @$el.html template\n      else\n        @setElement template\n    else\n      @_parseNode el for el in unless @parseSelf then @$el.children() else @$el\n\n    if @parent?._onRender\n      @listenToOnce @parent, 'render:after', -> @trigger 'render:after'\n    else\n      setTimeout => @trigger 'render:after'\n\n    @_onRender = false\n    @\n\n  _parseNode: (node, stop = false)->\n    if node?.attributes\n      el = $(node)\n      buffer = []\n      for attribute in node.attributes\n        if attribute.nodeName?.substr(0, 3) is \"ui-\"\n          name = Neck.Tools.dashToCamel attribute.nodeName.substr(3)\n          controller = (Neck.Helper[name] or @injector.load(name, type: 'helper'))\n          sortHelpers = true if controller.prototype.orderPriority\n          buffer.push controller: controller, value: attribute.value\n\n      # Firefox reads attributes in reverse order. \n      # For manually set order use 'orderPriority' in helper\n      buffer.reverse() if Neck.Controller.REVERSE_PARSING\n      buffer = _.sortBy(buffer, (b)-> - b.controller.prototype.orderPriority ) if sortHelpers\n\n      for item in buffer\n        stop = true if item.controller.prototype.template\n        new item.controller el: el, parent: @, mainAttr: item.value\n\n    @_parseNode child for child in node.children unless stop or not node\n    undefined\n\n  _watch: (key, callback, context = @)->\n    shortKey = key.split(@REGEXPS.PROPERTY_SEPARATOR)[0]\n\n    if @scope.hasOwnProperty(shortKey)\n      if Object.getOwnPropertyDescriptor(@scope, shortKey)?.get\n        return context.listenTo @, \"refresh:#{key}\", callback\n    else\n      controller = @\n      while controller = controller.parent\n        if controller.scope.hasOwnProperty shortKey\n          return controller._watch key, callback, context\n      undefined\n\n    # Create get/set property for shortKey\n    val = @scope[shortKey]\n\n    if val instanceof Backbone.Model\n      @listenTo val, \"change\", => @apply shortKey\n    else if val instanceof Backbone.Collection\n      @listenTo val, \"add remove change\", => @apply shortKey\n\n    Object.defineProperty @scope, shortKey, \n      enumerable: true\n      get: -> val\n      set: (newVal)=>\n        if newVal instanceof Backbone.Model\n          @stopListening val\n          @listenTo newVal, \"change\", => @apply shortKey\n        else if newVal instanceof Backbone.Collection\n          @stopListening val\n          @listenTo newVal, \"add remove change\", => @apply shortKey\n          \n        val = newVal\n        @apply shortKey\n    \n    context.listenTo @, \"refresh:#{key}\", callback\n\n  _getter: (scope, evaluate, original)->\n    try\n      getter = new Function \"scope\", \"__return = #{evaluate or undefined}; return __return;\"\n    catch e\n      throw \"#{e} in evaluating accessor '#{original or evaluate}'\"\n\n    ()-> \n      try\n        getter scope\n      catch e\n        if e instanceof TypeError\n          undefined\n        else\n          throw e\n\n  _setter: (scope, evaluate, original)->\n    try\n      setter = new Function \"scope, __newVal\", \"return #{evaluate} = __newVal;\"\n    catch e\n      throw \"#{e} in evaluating accessor '#{original or evaluate}'\"\n    \n    (newValue)-> \n      try\n        setter(scope, newValue)\n      catch e\n        throw e\n\n  watch: (keys, callback, initCall = true)->\n    keys = keys.split(' ')\n    call = => callback.apply @, _.map keys, (k)=> (@_getter(@scope, \"scope.#{k}\", k))()\n\n    @_watch key, call for key in keys\n    call() if initCall\n\n  apply: (key)->\n    unless @scope.hasOwnProperty(key)\n      controller = @\n      while controller = controller.parent\n        if controller.scope.hasOwnProperty(key)\n          return controller.trigger \"refresh:#{key}\"\n\n    @trigger \"refresh:#{key}\"\n\n  route: (controller, options = {yield: 'main'})->\n    throw \"No yields list. You may call method from controller custructor?\" unless @._yieldList\n    throw \"No yield '#{options.yield}' for route in yields chain\" unless target = @._yieldList[options.yield]\n   \n    target.append controller, options.params, options.refresh, options.replace\n\n  navigate: (url, params, options = {trigger: true})->\n    Neck.Router.prototype.navigate url + (if params then '?' + $.param(params) else ''), options","class Neck.Helper extends Neck.Controller\n  REGEXPS: _.extend {}, Neck.Controller::REGEXPS,\n    PROPERTIES: /\\'[^\\']*\\'|\\\"[^\"]*\\\"|(\\?\\ *)*[\\.a-zA-Z$_\\@][^\\ \\'\\\"\\{\\}\\(\\):\\[\\,]*(\\ *:)*(\\'[^\\']*\\'|\\\"[^\"]*\\\")*(\\[.*\\])*[^\\ \\'\\\"\\{\\}\\(\\):\\,]*/g\n    ONLY_PROPERTY: /^[a-zA-Z$_][^\\ \\(\\)\\{\\}\\:]*$/g\n    RESERVED_KEYWORDS: /(^|\\ )(true|false|undefined|null|NaN|void|this)($|[\\.\\ \\;])/g\n    BRACKET_LOOP: /\\[(.*)\\]/\n    INLINE_CONDITION: /^\\?\\ */\n    CLEAR_CONDITION: /\\ +\\:$/\n  \n  parseSelf: false\n  orderPriority: 0\n\n  constructor: (opts)->\n    super\n    @_setAccessor '_main', opts.mainAttr or \"\"\n\n    if @attributes\n      for attr in @attributes\n        if value = @el.attributes[Neck.Tools.camelToDash(attr)]?.value\n          @_setAccessor attr, value\n\n  _propertyChain: (text)->\n    chain = []\n    part = ''\n    inside = false\n    insideBracket = 0\n\n    for char in text\n      if char in ['\"',\"'\"] then inside = !inside\n      if char is '['\n        unless insideBracket or inside\n          insideBracket+= 1\n          chain.push part\n      else if char is '.'\n        unless inside then chain.push part\n      else if char is ']'\n        insideBracket -= 1\n      else if char is ' ' and not inside and not insideBracket\n        break\n\n      part += char\n\n    chain.push part\n    chain\n\n  _createObjectChain: (obj, resolve, evaluate)->\n    chain = resolve.split('.')\n    param = chain.pop()\n    while part = chain.shift()\n      objName = part.split('[')[0]\n      unless obj[objName]\n        throw \"Array has to be initialized for helper accessor: '#{evaluate}'\" if part.match /\\[/\n        obj[objName] = {}\n      return if (obj = obj[objName]) instanceof Array\n    unless obj.hasOwnProperty param\n      obj[param] or= undefined\n\n  _parseEvaluate: (evaluate, listeners, triggers)->\n    parsedEvaluate = evaluate.replace @REGEXPS.PROPERTIES, (t)=>\n      unless (char = t.substr(0, 1)) is '@' \n        if not(char in ['\"', \"'\", '.', '?']) and not (t[t.length-1] is ':')\n          if not t.match @REGEXPS.RESERVED_KEYWORDS\n            listeners.push.apply listeners, @_propertyChain t\n            triggers.push t\n            t = 'scope.' + t\n          t = t.replace @REGEXPS.BRACKET_LOOP, (sub)=> \n            \"[\" + @_parseEvaluate(sub.substr(1,sub.length-2), listeners, triggers) + \"]\"\n        else if char is \"?\"\n          t = t.split(@REGEXPS.INLINE_CONDITION)[1]\n          if not(t[0] in ['\"', \"'\"]) and not t.match @REGEXPS.RESERVED_KEYWORDS\n            listeners.push.apply listeners, @_propertyChain t\n            triggers.push t.replace @REGEXPS.CLEAR_CONDITION, ''\n            t = 'scope.' + t\n          t = \"? \" + t\n      else\n        t = 'scope._context.' + t.substr(1)\n      t\n\n    parsedEvaluate\n\n\n  _setAccessor: (key, evaluate)->\n    evaluate = evaluate.trim()\n    strict = false\n\n    listeners = []\n    triggers = []\n    parsedEvaluate = @_parseEvaluate evaluate, listeners, triggers\n\n    if listeners.length\n      triggers = _.uniq triggers\n      @scope._resolves[key] = listeners: [], triggers: []\n      for chain in _.uniq listeners\n        rootKey = chain.split(@REGEXPS.PROPERTY_SEPARATOR)[0]\n        controller = @\n        while controller = controller.parent\n          if controller.scope._resolves[chain]\n            @scope._resolves[key].listeners = _.union @scope._resolves[key].listeners, controller.scope._resolves[rootKey].listeners\n            @scope._resolves[key].triggers = _.union @scope._resolves[key].triggers, controller.scope._resolves[rootKey].triggers\n            break\n          if controller.scope.hasOwnProperty(rootKey)\n            @scope._resolves[key].listeners.push controller: controller, key: chain\n            @scope._resolves[key].triggers.push controller: controller, key: chain if chain in triggers and chain isnt rootKey\n            @_createObjectChain controller.scope, chain, evaluate\n            break\n          else unless controller.parent\n            @scope._resolves[key].listeners.push controller: @parent, key: chain\n            @_createObjectChain @parent.scope, chain, evaluate\n\n    getter = @_getter(@parent.scope, parsedEvaluate, evaluate)\n\n    options = \n      enumerable: true\n      get: -> if strict then parsedEvaluate else getter()\n\n    if parsedEvaluate.match(@REGEXPS.ONLY_PROPERTY) and !parsedEvaluate.match(@REGEXPS.RESERVED_KEYWORDS)\n      setter = @_setter(@parent.scope, parsedEvaluate, evaluate)\n      options.set = (newVal)=>\n        _return = setter newVal\n        @apply key\n        _return\n    else\n      options.set = (newVal)=>\n        strict = true\n        _return = parsedEvaluate = newVal\n        @trigger \"refresh:#{key}\"\n        _return\n\n    Object.defineProperty @scope, key, options\n\n  _watch: (key, callback, context = @)->\n    if @scope._resolves[key]\n      for listen in @scope._resolves[key].listeners\n        listen.controller._watch listen.key, callback, context\n      undefined\n    else \n      super\n\n  apply: (key)->\n    if @scope._resolves[key]\n      for trigger in @scope._resolves[key].triggers\n        trigger.controller.trigger \"refresh:#{trigger.key}\"\n      undefined\n    else\n      super","class Neck.Router extends Backbone.Router\n\n  PARAM_REGEXP: /\\:(\\w+)/gi\n\n  constructor:(opts)->\n    super\n\n    unless @app = opts?.app\n      throw \"Neck.Router require connection with App Controller\"\n\n  _createSettings: (settings)->\n    # Mix values to proper structure\n    unless settings.yields\n      if typeof settings is 'object'\n        yields: main: settings\n      else if typeof settings is 'string'\n        yields: main: controller: settings\n      else\n        throw \"Route structure has to be object or controller name\"\n    else\n      settings\n\n  route:(route, settings)->\n    settings = @_createSettings settings\n\n    myCallback = (args...)=>\n      if _.isObject (query = _.last(args))\n        args.pop() \n      else\n        query = {}\n\n      if args.length and !_.isRegExp(route)\n        route.replace @PARAM_REGEXP, (all, name)->\n          query[name] = param if param = args.shift()\n\n      for yieldName, options of settings.yields\n        throw \"No '#{yieldName}' yield defined in App\" unless _yield = @app._yieldList?[yieldName]\n        return _yield.clear() if options is false\n        \n        _yield.append (options.controller or options), \n          _.extend({}, options.params, query),\n          options.refresh,\n          options.replace\n          \n      @app.scope._state = settings.state if settings.state\n\n    super(route, myCallback)","class Neck.App extends Neck.Controller\n\n  routes: false\n  history: pushState: true\n\n  constructor: ->\n    super\n\n    if @routes\n      @router = new Neck.Router app: @, routes: @routes\n      if @history\n        @once 'render:after', => \n          Backbone.history.start @history ","class Neck.Helper.attr extends Neck.Helper\n\n  constructor: ->\n    super\n    throw \"'ui-attr' attribute has to be object\" unless typeof @scope._main is 'object'\n\n    @watch '_main', (main)->\n      for key, value of main\n        if returnedValue = value\n          @$el.attr key, if returnedValue is true then key else returnedValue\n        else\n          @$el.removeAttr key\n      undefined","class Neck.Helper.bind extends Neck.Helper\n  attributes: [\n    'bindProperty'\n    'bindNumber'\n  ]\n\n  NUMBER: /^[0-9]+((\\.|\\,)?[0-9]+)*$/\n\n  isCheckbox: false\n  isInput: false\n\n  constructor: (opts)->\n    super\n\n    @scope.bindNumber = true if @scope.bindNumber is undefined\n\n    if @$el.is('input, textarea, select')\n      @isInput = true\n      @isCheckbox = true if @$el.is(':checkbox')\n    \n    @$el.on 'keydown change search', @updateValue\n\n    @watch '_main', (value)->\n      if value instanceof Backbone.Model \n        throw \"Using Backbone.Model in 'ui-bind' requires 'bind-property'\" unless @scope.bindProperty\n        throw \"'bind-property' has to be a string\" unless typeof @scope.bindProperty is 'string'\n        return if @model is value\n        @stopListening @model if @model\n        @model = value\n        @listenTo @model, \"change:#{@scope.bindProperty}\", @updateView\n        @updateView()\n      else\n        if @model\n          @stopListening @model\n          @model = undefined\n\n        @updateView()\n      \n  updateView: =>\n    unless @isUpdated\n      value = if @model then @model.get(@scope.bindProperty) else @scope._main\n      if @isCheckbox\n        @$el.prop 'checked', !!value\n      else\n        value = if value is undefined then \"\" else value\n        if @isInput then @$el.val(value) else @$el.html(value)\n\n    @isUpdated = false\n\n  setValue: (value)->\n    @isUpdated = true\n    \n    if @model\n      @scope._main.set @scope.bindProperty, value\n    else\n      @scope._main = value \n\n  calculateValue: (s)->\n    if s.match(@NUMBER) and @scope.bindNumber\n      Number s.replace(',','.')\n    else\n      s\n\n  updateValue: =>\n    setTimeout =>\n      # Exit timeout when controller is already destroy\n      return unless @scope\n\n      if @isInput\n        if @isCheckbox\n          @setValue if @$el.is(':checked') then 1 else 0\n        else\n          @setValue @calculateValue @$el.val()\n      else\n        @setValue @calculateValue @$el.html()","class Neck.Helper.class extends Neck.Helper\n\n  constructor: ->\n    super\n\n    throw \"'ui-class' attribute has to be object\" unless typeof @scope._main is 'object'\n\n    @watch '_main', (main)->\n      for key, value of main\n        @$el.toggleClass key, !!value\n      undefined\n","class Neck.Helper.collection extends Neck.Helper\n  # Item Controller\n  class @ItemController extends Neck.Controller\n    divWrapper: false\n\n    constructor: (opts)->\n      super\n\n      @model = opts.model\n      \n      # Set own property\n      Object.defineProperty @scope, opts.itemName,\n        enumerable: true\n        writable: true\n        configurable: true\n        value: opts.model\n\n      # For iterating number in view\n      @scope._index = opts.index\n      \n      if opts.externalTemplate\n        @listenTo @scope[opts.itemName], 'change', => \n          @$el.replaceWith @render().$el\n\n  attributes: [\n    'collectionItem',\n    'collectionSort',\n    'collectionFilter',\n    'collectionView',\n    'collectionEmpty',\n    'collectionController'\n  ]\n\n  template: true\n  itemController: @ItemController\n\n  constructor: ->\n    super\n\n    @itemTemplate = @template\n    @itemTemplate = @scope.collectionView if @scope.collectionView\n    @template = @scope.collectionEmpty\n\n    if controller = @scope.collectionController\n      if typeof controller is 'string'\n        @itemController = @injector.load(controller, type: 'controller')\n      else\n        @itemController = controller\n    \n    @scope.collectionItem or= 'item'\n    @items = [] \n\n    @watch '_main', (collection)->\n      if collection and not (collection instanceof Backbone.Collection)\n        throw \"'ui-collection' main accessor has to be Backbone.Collection instance\"\n      \n      return if collection is @collection\n      @stopListening @collection if @collection\n\n      if @collection = collection\n        @apply 'collectionSort'\n        @apply 'collectionFilter'\n\n        @listenTo @collection, \"add\", @addItem\n        @listenTo @collection, \"remove\", @removeItem\n        @listenTo @collection, \"sort\", @sortItems\n        @listenTo @collection, \"reset\", @resetItems\n\n      @resetItems()\n\n    @watch 'collectionSort', (sort)->\n      if sort and @collection\n        @collection.comparator = sort\n        @collection.sort()\n\n    @watch 'collectionFilter', (filter)->\n      if filter or filter is \"\"\n        if typeof filter is 'string'\n          for item in @items\n            if (item.model + \"\").toLowerCase().match filter.toLowerCase()\n              item.$el.removeClass 'ui-hide'\n            else\n              item.$el.addClass 'ui-hide'\n          undefined\n        else if typeof filter is 'function'\n          for item in @items\n            if filter(item.model)\n              item.$el.removeClass 'ui-hide'\n            else\n              item.$el.addClass 'ui-hide'\n          undefined\n\n  addItem: (model)=>\n    @el.innerHTML = '' unless @items.length\n\n    @items.push item = new @itemController(\n      template: @itemTemplate\n      externalTemplate: @scope.collectionView\n      parent: @parent\n      model: model\n      itemName: @scope.collectionItem\n      index: @items.length\n    )\n    @$el.append item.render().$el\n\n  removeItem: (model)=>\n    item = _.findWhere(@items, model: model)\n    @items.splice @items.indexOf(item), 1\n    item.remove()\n\n    unless @collection?.length\n      @renderEmpty()\n\n  sortItems: =>\n    for model in @collection.models\n      _.findWhere(@items, model: model).$el.appendTo @$el\n    undefined\n\n  resetItems: =>\n    item.remove() for item in @items\n    @items = []\n    @el.innerHTML = ''\n\n    if @collection?.length\n      @addItem(item) for item in @collection.models\n      undefined\n    else\n      @renderEmpty()\n\n  renderEmpty:->\n    @render() if @template","class Neck.Helper.controller extends Neck.Helper\n  template: true\n  attributes: ['controllerParams', 'controllerInherit']\n  id: null\n\n  constructor: ->\n    super\n\n    @watch '_main', (newId)->\n      if newId and not (typeof newId is 'string')\n        throw \"'ui-controller' main accessor has to be string controller ID\"\n\n      return if newId is @id\n\n      if @controller\n        @controller.$el = $()\n        @controller.remove()\n\n      if @id = newId\n        Controller = @injector.load @id, type: 'controller'\n        @controller = new Controller el: @$el, params: @scope.controllerParams, template: @template or @id, parent: if @scope.controllerInherit then @parent\n        \n        @controller.scope._context = @controller if @scope.controllerInherit\n        @controller.injector = @injector\n        @controller.parseSelf = false\n        \n        @controller.render()\n\n","class Neck.Helper.element extends Neck.Helper\n\n  constructor: ->\n    super\n    throw \"'ui-element' attribute has to be string\" unless typeof @scope._main is 'string'\n\n    @parent?.scope[@scope._main] = @$el","### LIST OF EVENTS TO TRIGGER ###\n\nEventList = [\n  # Mouse events\n  \"click\", \"dblclick\"\n  \"mouseenter\", \"mouseleave\", \"mouseout\"\n  \"mouseover\", \"mousedown\", \"mouseup\"\n  \"drag\", \"dragstart\", \"dragenter\", \"dragleave\", \"dragover\", \"dragend\", \"drop\"\n  # General\n  \"load\"\n  \"focus\", \"focusin\", \"focusout\", \"select\", \"blur\"\n  \"submit\"\n  \"scroll\"\n  # Touch events\n  \"touchstart\", \"touchend\", \"touchmove\", \"touchenter\", \"touchleave\", \"touchcancel\"\n  # Keys events\n  \"keyup\", \"keydown\", \"keypress\"\n]\n\nclass EventHelper extends Neck.Helper\n  constructor: (opts)->\n    super\n    \n    if typeof (method = @scope._main) is 'function'\n      method.call @scope._context, opts.e\n\n    # When action call @remove method scope is cleared\n    # Then apply method should not be called\n    if @scope\n      @apply '_main' \n      @off()\n      @stopListening()\n\nclass Event\n  constructor: (options)->\n    # Anchor should have 'href' attribute\n    if options.el[0].tagName is 'A'\n      options.el.attr 'href', '#' unless options.el.attr 'href'\n\n    options.el.on @eventType, (e)=>\n      e.preventDefault()\n      options.e = e\n      new EventHelper options\n\nfor ev in EventList\n  helper = class ER extends Event\n  helper::eventType = ev\n  Neck.Helper[Neck.Tools.dashToCamel(\"event-#{ev}\")] = helper","class Neck.Helper.hide extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @watch '_main', (value)->\n      @$el.toggleClass 'ui-hide', !!value\n","class HrefHelper extends Neck.Helper\n  \n  constructor: (opts)->\n    super \n    \n    opts.e.preventDefault()\n    Neck.Router.prototype.navigate @scope._main, trigger: true\n\nclass Neck.Helper.href\n  constructor: (opts)->\n    # Add href for styling purposes\n    opts.el.attr 'href', '#'\n\n    opts.el.on 'click', (e)->\n      new HrefHelper _.extend opts, e: e","class Neck.Helper.init extends Neck.Helper\n\n  constructor: ->\n    super\n\n    if typeof @scope._main is 'function'\n      @scope._main.call @scope._context","class Neck.Helper.list extends Neck.Helper\n  # Item Controller\n  class @ItemController extends Neck.Controller\n    divWrapper: false\n\n    constructor: (opts)->\n      super\n\n      @item = opts.item\n      \n      # Set own property\n      Object.defineProperty @scope, opts.itemName,\n        enumerable: true\n        writable: true\n        configurable: true\n        value: opts.item\n\n      # For iterating number in view\n      @scope._index = opts.index\n\n  attributes: [\n    'listItem',\n    'listSort',\n    'listFilter',\n    'listView',\n    'listEmpty',\n    'listController'\n  ]\n\n  template: true\n  itemController: @ItemController\n\n  constructor: ->\n    super\n\n    @itemTemplate = @template\n    @itemTemplate = @scope.listView if @scope.listView\n    @template = @scope.listEmpty\n\n    if controller = @scope.listController\n      if typeof controller is 'string'\n        @itemController = @injector.load(controller, type: 'controller')\n      else\n        @itemController = controller\n\n    @itemName or= 'item'\n    @items = []\n\n    @watch '_main', (list)->\n      if list and not (list instanceof Array)\n        throw \"'ui-list' main accessor has to be Array instance\"\n\n      return if @list is list\n      @list = list\n      \n      @resetItems()\n      @apply 'listSort' if @scope.listSort \n      @apply 'listFilter' if @scope.listFilter\n\n\n    @watch 'listSort', (sort)->\n      if sort and @list\n        @list = _.sortBy @list, (i)-> sort(i)\n        for item in @list\n          _.findWhere(@items, item: item).$el.appendTo @$el\n        undefined\n\n    @watch 'listFilter', (filter)->\n      if filter or filter is \"\"\n        for i in @items\n          if (item.model + \"\").toLowerCase().match filter.toLowerCase()\n            i.$el.removeClass 'ui-hide'\n          else\n            i.$el.addClass 'ui-hide'\n        undefined\n\n  resetItems: ->\n    item.remove() for item in @items\n    @items = []\n    @el.innerHTML = ''\n\n    if @list?.length\n      @add(item) for item in @list\n      undefined\n    else if @scope.listEmpty and @template\n      @render()\n\n  add: (item)->\n    @items.push item = new @itemController(\n      template: @itemTemplate\n      parent: @\n      item: item\n      itemName: @itemName\n      index: @items.length\n    )\n    @$el.append item.render().$el","$ ->\n  $('[ui-neck]').each ->\n    el = $(@)\n    name = eval(el.attr('ui-neck'))\n    injector = Neck.DI[ if el.attr('neck-injector') then eval(el.attr('neck-injector')) else 'globals' ]\n    Controller = injector.load(name, type: 'controller')\n\n    el.removeAttr 'ui-neck'\n    controller = new Controller(el: el, template: name)\n    controller.injector = injector\n    controller.render()\n","class RouteHelper extends Neck.Helper\n  attributes: ['routeYield', 'routeReplace', 'routeParams', 'routeRefresh']\n\n  constructor: (opts)->\n    super \n    \n    opts.e.preventDefault()\n\n    container = @scope.routeYield or 'main'\n    \n    unless target = @scope._context._yieldList[container]\n      throw \"No yield '#{container}' for route in yields chain\"\n   \n    target.append @scope._main, @scope.routeParams, @scope.routeRefresh, @scope.routeReplace\n\nclass Neck.Helper.route\n  template: false\n  \n  constructor: (opts)->\n    opts.el.on 'click', (e)->\n      new RouteHelper _.extend opts, e: e","class Neck.Helper.show extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @$el.addClass 'ui-hide'\n\n    @watch '_main', (value)->\n      @$el.toggleClass 'ui-hide', !!!value\n","class Neck.Helper.template extends Neck.Helper\n  template: true\n\n  constructor: ->\n    super\n\n    @scope._main = @template\n\n    # Clear element\n    @$el.addClass 'ui-hide'\n    setTimeout => @remove()\n      \n   \n    ","class Neck.Helper.value extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @watch '_main', (value)->\n      @$el.text if value is undefined then \"\" else value","class Neck.Helper.yield extends Neck.Helper\n  attributes: ['yieldView', 'yieldParams', 'yieldReplace', 'yieldInherit', 'yieldHistory']\n  template: true\n  replace: false\n\n  constructor: ->\n    super\n\n    # Properties\n    @name = @scope._main or \"main\"\n\n    # References\n    @context = @scope._context\n    @list = @context._yieldList or= {}\n\n    if @list[@name]\n      throw \"There is already yield with '#{@name}' name in App\"\n    else\n      @list[@name] = @\n\n    @listenTo @context, 'render:clear remove:after', =>\n      delete @list[@name]\n\n    @replace or= @scope.yieldReplace\n\n    if @scope.yieldView\n      @append @scope.yieldView, @scope.yieldParams\n    \n    if @scope.yieldHistory\n      window.addEventListener \"popstate\", @_popState\n      @on \"remove:after\", => \n        window.removeEventListener \"popstate\", @_popState\n\n  _createController: (controllerPath, params, parent)->\n    Controller = @injector.load(controllerPath, type: 'controller')\n    controller = new Controller template: \"#{controllerPath}\", params: params, parent: if @scope.yieldInherit then @context\n    controller.injector = @context.injector # Set injector from parent view controller\n    controller.scope._context = controller if @scope.yieldInherit\n    \n    # Inherit yields\n    controller._yieldList = Object.create @list\n    controller._yieldPath = controllerPath\n\n    # Set parent controller\n    parent._yieldChild = controller\n    parent.listenTo controller, \"remove:after\", =>\n      @_backHistory parent\n      parent._yieldChild = undefined\n\n    controller.listenTo parent, \"remove:after\", -> controller.remove()\n\n    @$el.append controller.render().$el\n\n    controller\n\n  _popState: ()=>\n    if @omitPop\n      @omitPop = false\n      return\n\n    controllerPath = history.state\n    parent = @\n    child = undefined\n\n    while parent._yieldChild\n      child = parent._yieldChild\n      if child._yieldPath is controllerPath\n        @omitBack = true\n        child._yieldChild?.remove()\n        break\n      parent = child\n\n  _pushHistory: (controllerPath, actionName)->\n    return if not @scope.yieldHistory\n    history[actionName](controllerPath, '', undefined)\n\n  _backHistory: (child)->\n    return if not @scope.yieldHistory\n\n    if @omitBack\n      @omitBack = false\n      return\n\n    deep = 0\n    while child._yieldChild\n      deep += 1\n      child = child._yieldChild\n    \n    @omitPop = true\n    history.back(deep)\n\n  append: (controllerPath, params, refresh = false, replace = @replace)->\n    if replace and @_yieldChild\n      if controllerPath is @_yieldChild._yieldPath \n        if @_yieldChild._events[\"render:refresh\"] or not refresh\n          @_yieldChild._yieldChild?.remove()\n        else\n          @_yieldChild.remove()\n          @_yieldChild = undefined\n      else\n        @_yieldChild.remove()\n        @_yieldChild = undefined\n\n    historyAction = if not @_yieldChild then 'replaceState' else 'pushState'\n\n    # Check if controller is already in yield\n    parent = @\n    child = undefined\n\n    while parent._yieldChild\n      child = parent._yieldChild\n      if child._yieldPath is controllerPath\n        if refresh and not child._events[\"render:refresh\"]\n          child.remove()\n          break\n        else\n          child.trigger \"render:refresh\"\n          child._yieldChild?.remove()\n          child._yieldChild = undefined\n          return child\n\n      parent = parent._yieldChild\n  \n    @_createController controllerPath, params, parent\n    @_pushHistory controllerPath, historyAction\n\n  clear: ->\n    if @_yieldChild\n      @_yieldChild.remove()\n      @_yieldChild = undefined"]}